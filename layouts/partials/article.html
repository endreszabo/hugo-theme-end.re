            <section class="wrapper-content">
				<section class="post-index" itemscope itemtype="http://schema.org/BlogPosting">
					<article class="post-content">
						<div class="post-header">
							{{ if not (eq .Params.hideTitle true) }}
								{{- if .Title }}
							<h2 class="post-title" itemprop="name">{{ .Title | safeHTML }}</h2>
								{{- end -}}
							{{- end -}}
							{{ partial "post-meta.html" . }}
						</div>
						{{- if .Params.headerimage }}
						<figure class="landing-image">
							<img src="{{.Params.headerimage}}" alt="{{ .Title }}"/>
						</figure>
						{{- end }}
						<div class="entry-content" itemprop="articleBody">
							{{ .Content -}}
						</div>

						{{ if .Site.Params.SmartToc }}
						<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
						<script>
							(function() {
								var $toc = $('#TableOfContents');
								if ($toc.length > 0) {
									var $window = $(window);

									function onScroll(){
										var currentScroll = $window.scrollTop();
										var h = $('.article-entry h1, .article-entry h2, .article-entry h3, .article-entry h4, .article-entry h5, .article-entry h6');
										var id = "";
										h.each(function (i, e) {
											e = $(e);
											if (e.offset().top - 10 <= currentScroll) {
												id = e.attr('id');
											}
										});
										var active = $toc.find('a.active');
										if (active.length == 1 && active.eq(0).attr('href') == '#' + id) return true;

										active.each(function (i, e) {
											$(e).removeClass('active').siblings('ul').hide();
										});
										$toc.find('a[href="#' + id + '"]').parentsUntil('#TableOfContents').each(function (i, e) {
											$(e).children('a').addClass('active').siblings('ul').show();
										});
									}

									$window.on('scroll', onScroll);
									$(document).ready(function() {
										$toc.find('a').parent('li').find('ul').hide();
										onScroll();
										document.getElementsByClassName('article-toc')[0].style.display = '';
									});
								}
							})();
						</script>
						{{ end }}
					</article>
				</section>
				{{- if not (eq .Params.hideComments true) }}
					{{- if .Site.Params.disqusShortname }}
				<hr />
				<section id="comments">
					<h2 class="title">{{ i18n "commentSectionTitle" . }}</h2>
					<div id="disqus_thread" aria-live="polite">{{ i18n "disqusNoscriptText" | safeHTML }}</div>
				</section>
					{{- end }}
				{{- end }}
				<hr />
				{{ partial "nav.html" . }}
			</section>
		</section>
		{{ if not .Params.params.notoc }}
		<div class="article-toc" {{ if .Site.Params.SmartToc }}style="display:none;"{{ end }}>
			<h3>Contents</h3>
			{% .TableOfContents %}
			{{ $headers := findRE "<h[1-4].*?>(.|\n])+?</h[1-4]>" .Content }}
<!-- at least one header to link to -->
{{ $has_headers := ge (len $headers) 1 }}
<!-- a post can explicitly disable Table of Contents with toc: false -->
{{ $show_toc := (ne $.Params.hideToc true) }}
{{ if and $has_headers $show_toc }}
<nav id="toc" data-toggle="toc">
  <!-- TOC header -->
  <h4 class="text-muted">Table of Contents</h4>
  <ul class="nav">
    {{ range $i, $header := $headers }}
      {{ $headerLevel := index (findRE "[1-3]" . 1) 0 }}
      {{ $headerLevel := len (seq $headerLevel) }}

      {{ $anchorID := ($header | plainify | htmlEscape | urlize) }}

      {{ if ne $i 0 }}
        {{ $prevHeaderLevel := index (findRE "[1-3]" (index $headers (sub $i 1)) 1) 0 }}
        {{ $prevHeaderLevel := len (seq $prevHeaderLevel) }}

          {{ if gt $headerLevel $prevHeaderLevel }}
            {{ range seq (sub $headerLevel $prevHeaderLevel) }}
              <ul class="nav">
            {{end}}
          {{end}}

          {{ if lt $headerLevel $prevHeaderLevel }}
            {{ range seq (sub $prevHeaderLevel $headerLevel) }}
              </li></ul></li>
            {{end}}
          {{end}}

          {{ if eq $headerLevel $prevHeaderLevel }}
            </li>
          {{end}}

          <li>
            <a href="#{{ $anchorID }}">{{ $header | plainify | htmlEscape }}</a>

          {{ if eq $i (sub (len $headers) 1) }}
            {{ range seq (sub $prevHeaderLevel $headerLevel) }}
              </li></ul></li>
            {{end}}
          {{end}}
      {{else}}
      <li>
        <a href="#{{ $anchorID }}">{{ $header | plainify | htmlEscape }}</a>
      {{end}}
    {{end}}

    {{ $firstHeaderLevel := len (seq (index (findRE "[1-3]" (index $headers 0) 1) 0)) }}
    {{ $lastHeaderLevel := len (seq (index (findRE "[1-3]" (index $headers (sub (len $headers) 1)) 1) 0)) }}
    {{ range seq (sub $lastHeaderLevel $firstHeaderLevel) }}
      </li></ul></li>
    {{end}}

  </ul>
</nav>
{{end}}
		</div>
		{{ end }}

