            <section class="wrapper-content">
				<section class="post-index" itemscope itemtype="http://schema.org/BlogPosting">
					<article class="post-content">
						<div class="post-header">
							{{ if (ne $.Page.Params.params.hideTitle true) }}
								{{- if .Title }}
							<h2 class="post-title" itemprop="name">{{ .Title | safeHTML }}</h2>
								{{- end -}}
							{{- end -}}
							{{ if (ne $.Page.Params.params.hideMeta true) }}
							{{ partial "post-meta.html" . }}
							{{- end -}}
						</div>
						{{- if $.Page.Params.params.headerimage }}
						<figure class="landing-image">
							<img src="{{$.Page.Params.params.headerimage}}" alt="{{ .Title }}"/>
						</figure>
						{{- end }}
						<div class="entry-content full-article" itemprop="articleBody">
							{{ $parts := slice `${1}&nbsp;<a class="anchor" href="` .Permalink `#${2}">#</a>${3}` }}
							{{- $permaLink := delimit $parts "" -}}
							{{.Content | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)" $permaLink | safeHTML }}
						</div>
					</article>
				</section>
				{{- if (ne $.Page.Params.params.hideComments true) }}
				<hr />
				<section id="comments">
					<h2 class="title">{{ i18n "commentSectionTitle" . }}</h2>
					<button id="button_enable_comments" class="comments-toggle" onClick="enable_comments();">Click to show comments</button>
					<div id="disqus_thread" aria-live="polite">{{ i18n "disqusNoscriptText" | safeHTML }}</div>
				</section>
				{{- end }}

				{{- if (ne $.Page.Type "page") }}
				<hr />
				<section id="contribute">
					<p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg>&nbsp;<a href="https://github.com/endreszabo/blog/edit/master/content/{{ $.Page.Type }}/{{ .File.LogicalName }}">Edit this page on GitHub</a>{{ if .GitInfo }} This page was generated on {{ now.Format "January 2, 2006" }} from git commit <a href="https://github.com/endreszabo/blog/blob/{{ .GitInfo.Hash }}/content/{{ $.Page.Type }}/{{ .File.LogicalName }}">{{ .GitInfo.AbbreviatedHash }}</a>.{{- end -}}
					</p>
				</section>
				{{- end }}

				{{/* for a while we disable nav until unlisted-post support is somehow supported }}
				{{ if (ne $.Page.Params.params.hideNav true) }}
				<hr />
				{{ partial "nav.html" . }}
				{{- end }}
				*/}}
			</section>
		</section>
		{{ if (eq $.Page.Params.params.showTOC true) }}
		<div class="article-toc" {{ if .Site.Params.SmartToc }}style="display:none;"{{ end }}>
			<h3>Contents</h3>
			{% .TableOfContents %}
			{{ $headers := findRE "<h[1-4].*?>(.|\n])+?</h[1-4]>" .Content }}
			<!-- at least one header to link to -->
			{{ $has_headers := ge (len $headers) 1 }}
			<!-- a post can explicitly disable Table of Contents with toc: false -->
			{{ $show_toc := (ne $.Params.hideToc true) }}
			{{ if and $has_headers $show_toc }}
			<nav id="toc" data-toggle="toc">
			  <!-- TOC header -->
			  <h4 class="text-muted">Table of Contents</h4>
			  <ul class="nav">
				{{ range $i, $header := $headers }}
			  {{ $headerLevel := index (findRE "[1-3]" . 1) 0 }}
			  {{ $headerLevel := len (seq $headerLevel) }}

			  {{ $anchorID := ($header | plainify | htmlEscape | urlize) }}

			  {{ if ne $i 0 }}
				{{ $prevHeaderLevel := index (findRE "[1-3]" (index $headers (sub $i 1)) 1) 0 }}
				{{ $prevHeaderLevel := len (seq $prevHeaderLevel) }}

				  {{ if gt $headerLevel $prevHeaderLevel }}
					{{ range seq (sub $headerLevel $prevHeaderLevel) }}
					  <ul class="nav">
					{{end}}
				  {{end}}

				  {{ if lt $headerLevel $prevHeaderLevel }}
					{{ range seq (sub $prevHeaderLevel $headerLevel) }}
					  </li></ul></li>
					{{end}}
				  {{end}}

				  {{ if eq $headerLevel $prevHeaderLevel }}
					</li>
				  {{end}}

				  <li>
					<a href="#{{ $anchorID }}">{{ $header | plainify | htmlEscape }}</a>

				  {{ if eq $i (sub (len $headers) 1) }}
					{{ range seq (sub $prevHeaderLevel $headerLevel) }}
					  </li></ul></li>
					{{end}}
				  {{end}}
			  {{else}}
			  <li>
				<a href="#{{ $anchorID }}">{{ $header | plainify | htmlEscape }}</a>
			  {{end}}
			{{end}}

			{{ $firstHeaderLevel := len (seq (index (findRE "[1-3]" (index $headers 0) 1) 0)) }}
			{{ $lastHeaderLevel := len (seq (index (findRE "[1-3]" (index $headers (sub (len $headers) 1)) 1) 0)) }}
			{{ range seq (sub $lastHeaderLevel $firstHeaderLevel) }}
			  </li></ul></li>
			{{end}}

			  </ul>
			</nav>
		{{end}}
		</div>
		{{ end }}

